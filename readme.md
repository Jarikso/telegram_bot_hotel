# Телеграм-бот поиска отелей
## Содежрание
- Описание бота <br/>
- Структура бота <br/>
- Используемые библиотеки <br/>
- Описание команд<br/>
- Работа с ботом
## Описание бота
Телеграм-бот для поиска информации об отелях по указанным параметрам. <br/>
Название бота: ***world_hotel*** <br/>
Его можно найти по следующему id: [@worldHotelbot](https://t.me/worldHotelbot) <br/>
После ввода соответствующей команды пользователям, бот совершает <br/>
операции для поиска отелей по указанным параметрам. Для получения <br/>
информации о том или ином отеле используется сайт [Hotels.com](https://rapidapi.com/apidojo/api/hotels4/) с его <br/>
бесплатным API.

## Структура бота

![](images/image.jpg) <br/>
где: <br/>
- main.py, файл обработки команд телеграмм бота <br/>
- config.py, файл конфигураций, в том числе содержит декораторы логирующие методы TelebotApi<br/>
- requirements.txt, содержит данные библиотек <br/>
- search_now.bd, файл библиотеки <br/>
- readme.md, файл информации о боте <br/>
- botrequests, директория с реквестами команд <br/>
--- __init.py__, файл инициализации библиотеки <br/>
--- bestdeal.py, файл обработки команды bestdeal <br/>
--- highprice.py, файл обработки команды highprice <br/>
--- history.py, файл обработки команды history, поддерживает работу с СУБД <br/>
--- lowprice.py, файл обработки команды lowprice <br/> 
--- .env.example, файл для наглядного использования ТОКЕНА и АПИ, куда можно подставить свои значения

## Используемые библиотеки сторонние библиотеки
<table align="center">
    <tr>
        <td align="center">Package</td>
        <td align="center">Version</td>
    </tr>
    <tr>
        <td align="center">loguru</td>
        <td align="center">0.5.3</td>
    </tr>
    <tr>
        <td align="center">config</td>
        <td align="center">0.5.1</td>
    </tr>
    <tr>
        <td align="center">python-dotenv</td>
        <td align="center">0.19.2</td>
    </tr>
    <tr>
        <td align="center">requests</td>
        <td align="center">2.26.0</td>
    </tr>
</table>

## Описание команд
### Команда /lowprice <br/>
После ввода команды у пользователя запрашивается:
1. Город, где будет проводиться поиск.
2. Количество отелей, которые необходимо вывести в результате (не больше
заранее определённого максимума).
3. Необходимость загрузки и вывода фотографий для каждого отеля (“Да/Нет”)
При положительном ответе пользователь также вводит количество необходимых фотографий (не больше заранее определённого максимума)
### Команда /highprice <br/>
После ввода команды у пользователя запрашивается:
1. Город, где будет проводиться поиск.
2. Количество отелей, которые необходимо вывести в результате (не больше
заранее определённого максимума).
3. Необходимость загрузки и вывода фотографий для каждого отеля (“Да/Нет”)
a. При положительном ответе пользователь также вводит количество необходимых фотографий (не больше заранее определённого максимума)
### Команда /bestdeal<br/>
После ввода команды у пользователя запрашивается:
1. Город, где будет проводиться поиск.
2. Диапазон цен.
3. Диапазон расстояния, на котором находится отель от центра.
4. Количество отелей, которые необходимо вывести в результате (не больше
заранее определённого максимума).
5. Необходимость загрузки и вывода фотографий для каждого отеля (“Да/Нет”)
a. При положительном ответе пользователь также вводит количество необходимых фотографий (не больше заранее определённого максимума)
### Команда /history<br/>
После ввода команды пользователю выводится история поиска отелей. Сама история содержит:
1. Команду, которую вводил пользователь.
2. Дату и время ввода команды.
3. Отели, которые были найдены.

## Работа с ботом
Инициализация работы с ботом осуществляется командой
>/start

При его нажатии приходит приветственное сообщение, и формируется строка команд<br/>
![](images/image_1.jpg) <br/>
После выбора команды происходит ицициализация запросов для сормирования парасетров<br/>
поиска ввиде словаря параметров поиска. Например команды '/help' и '/histopy' не требуют<br/>
запроса на формирование параметров поиска.<br/>
![](images/image_2.jpg) <br/>
Для команд '/lowprice', '/highprice', '/bestdeal' требуется настройка поиска. При вводе<br/>
команды '/lowprice', '/highprice' запрашиваются дата заезда и выезда из отелей, а так же<br/>
количество отелей для вывода<br/>
При вводе команды '/bestdeal' запрашивается:
- Дата заезда и выезда, инициализируется инлайн-клавиатурой
- Минмальная и максимальная цена за номер в отеле
- Диапазон расстояния, на котором находится отель от центра
- Количество отелей

Результатом работы бота является инлайн-клавиатура с названиями отелей, согласно тому количеству, <br/>
которое указал пользователь. После нажатия на клавишу выводится сообщение с информацией о выбранном <br/>
отеле. По окончанию ознакомления с информацией пользователю будет предложен выбор команд либо <br/>
загрузить фотографии, перейти на сайт, перейти в начальное меню<br/>
![](images/image_3.jpg ) <br/>
Дальше можно повторить запрос другой или этой команды, либо дальше просматривать информацию из результата поиска

## Авторы
Студент курса Профессия Python-разработчик: Ярослав Меркулов (исполнение) <br/> 
Преподаватель: Артем Семенычев (тестирование)
